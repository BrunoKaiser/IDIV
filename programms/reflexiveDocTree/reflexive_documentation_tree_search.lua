lua_tree_output={ branchname="example of a reflexive tree",
{ branchname="unsortierte Internetseiten",
{ branchname="uninteressante Seiten",
{ branchname="https://labix.org",
state="COLLAPSED",
},
},
},
{ branchname="Suche",
 "https://duckduckgo.com/?q=User+Experience+Design&t=ffhp&ia=web",
{ branchname="c:\\Temp",
state="COLLAPSED",
},
},
{ branchname="Sortierte Internetseiten",
{ branchname="Weiterbildung",
state="COLLAPSED",
{ branchname="https://www.microsoft.com",
state="COLLAPSED",
 "https://www.microsoft.com/en-us/leap/pathways/user-experience-designer",},
{ branchname="https://www.wb-fernstudium.de",
state="COLLAPSED",
 "https://www.wb-fernstudium.de/kursseite/mensch-computer-interaktion.html",},
{ branchname="https://www.uni-due.de",
state="COLLAPSED",
 "https://www.uni-due.de/soco/teaching/courses/lecture-mci-ws21.php",},
{ branchname="https://www.lmu.de",
state="COLLAPSED",
 "https://www.lmu.de/de/studium/studienangebot/alle-studienfaecher-und-studiengaenge/mensch-computer-interaktion-master-hauptfach-4517.html",},
{ branchname="https://www.inf.uni-hamburg.de",
state="COLLAPSED",
 "https://www.inf.uni-hamburg.de/studies/bachelor/mci/what-is-mci.html",},
{ branchname="https://www.lecturio.de",
state="COLLAPSED",
 "https://www.lecturio.de/magazin/risiken-identifizieren",},
},
{ branchname="Organisationen",
state="COLLAPSED",
{ branchname="https://www.interaction-design.org",
{ branchname="1. Useful, 2, Usable, 3. Accessible, 4. Credible, 5. Findable, 6. Desirable, 7. Valuable",
state="COLLAPSED",
},
 "https://www.interaction-design.org/literature/topics/ux-design",
},
},
{ branchname="Mathematik",
state="COLLAPSED",
{ branchname="https://wikiludia.mathematik.uni-muenchen.de",
state="COLLAPSED",
 "https://wikiludia.mathematik.uni-muenchen.de/wiki/index.php?title=Dynamische_Optimierung",},
{ branchname="https://www.wikiwand.com",
state="COLLAPSED",
 "https://www.wikiwand.com/de/Dynamische_Optimierung",},
{ branchname="https://www.so.msm.uni-due.de",
state="COLLAPSED",
 "https://www.so.msm.uni-due.de/fileadmin/Dateien/Organisation/Dokumente/Termin_1.pdf",},
{ branchname="https://www.wikizero.com",
 "https://www.wikizero.com/de/Adaptive_Optimierung",},
},
{ branchname="Forschung",
state="COLLAPSED",
{ branchname="https://dorsch.hogrefe.com",
{ branchname="Usability und User Experience",
state="COLLAPSED",
},
 "https://dorsch.hogrefe.com/stichwort/mensch-computer-interaktion",
},
{ branchname="https://www.zukunftsinstitut.de",
state="COLLAPSED",
},
{ branchname="https://www.trendsderzukunft.de",
state="COLLAPSED",
},
{ branchname="https://www.wissenschaftliches-arbeiten.org",
state="COLLAPSED",
},
{ branchname="https://www.planet-wissen.de",
state="COLLAPSED",
},
{ branchname="https://www.spektrum.de",
state="COLLAPSED",
},
{ branchname="https://www.isi.fraunhofer.de",
state="COLLAPSED",
},
},
{ branchname="Transport",
state="COLLAPSED",
{ branchname="https://www.deutschebahn.com",
state="COLLAPSED",
},
},
{ branchname="Filme",
state="COLLAPSED",
{ branchname="https://www.youtube.com",
state="COLLAPSED",
},
{ branchname="https://vimeo.com",
state="COLLAPSED",
},
},
{ branchname="Nachrichtenseiten",
state="COLLAPSED",
{ branchname="https://www.stern.de",
state="COLLAPSED",
},
{ branchname="https://www.faz.net",
state="COLLAPSED",
},
{ branchname="https://www.sueddeutsche.de",
state="COLLAPSED",
},
{ branchname="https://www.t-online.de",
state="COLLAPSED",
},
{ branchname="https://www.focus.de",
state="COLLAPSED",
},
{ branchname="https://www.mdr.de",
state="COLLAPSED",
},
{ branchname="https://www.zeit.de",
state="COLLAPSED",
},
{ branchname="https://www.spiegel.de",
state="COLLAPSED",
},
{ branchname="https://www.tagesschau.de",
state="COLLAPSED",
},
{ branchname="https://www.boersennews.de",
state="COLLAPSED",
},
{ branchname="https://www.welt.de",
state="COLLAPSED",
},
{ branchname="https://www.diepresse.com",
state="COLLAPSED",
},
{ branchname="https://www.zdf.de",
state="COLLAPSED",
},
},
{ branchname="Allgemeinwissen",
state="COLLAPSED",
{ branchname="https://definition-online.de",
 "https://definition-online.de/floater/",},
{ branchname="https://de.wikipedia.org",
 "https://de.wikipedia.org/wiki/Mensch-Computer-Interaktion",
{ branchname="https://de.wikipedia.org/wiki/Baum_(Steuerelement)",
{ branchname="https://de.wikipedia.org/wiki/Baum_(Graphentheorie)",
state="COLLAPSED",
},
{ branchname="https://de.wikipedia.org/wiki/Baum_(Datenstruktur)",
state="COLLAPSED",
},
},
{ branchname="https://de.wikipedia.org/wiki/Expertensystem",
{ branchname="https://de.wikipedia.org/wiki/Entscheidungsbaum",
state="COLLAPSED",
},
{ branchname="https://de.wikipedia.org/wiki/Suchbaum",
state="COLLAPSED",
},
},
 "https://de.wikipedia.org/wiki/Risiko", "https://de.wikipedia.org/wiki/Risiko_(Spiel)",
 "https://de.wikipedia.org/wiki/Lua",
 "https://de.wikipedia.org/wiki/Beleihung_(Kreditwesen)",
 "https://de.wikipedia.org/wiki/Kreditwesengesetz",
 "https://de.wikipedia.org/wiki/Bank",
 "https://de.wikipedia.org/wiki/Liste_der_größten_Banken_in_Deutschland",
 "https://de.wikipedia.org/wiki/Monetäre_Finanzinstitute",
 "https://de.wikipedia.org/wiki/Kreditinstitut",
 "https://de.wikipedia.org/wiki/Simulationsbasierte_Optimierung",
 "https://de.wikipedia.org/wiki/Dynamische_Optimierung",
 "https://de.wikipedia.org/wiki/Dynamische_Programmierung",
 "https://de.wikipedia.org/wiki/WAN-Optimierung",
 "https://de.wikipedia.org/wiki/Optimierung_(Mathematik)",
},
},
{ branchname="Statisitk",
state="COLLAPSED",
{ branchname="https://de.statista.com",
state="COLLAPSED",
},
},
{ branchname="Wirtschaft",
state="COLLAPSED",
{ branchname="Banken",
state="COLLAPSED",
{ branchname="https://www.kreditwesen.de",
state="COLLAPSED",
},
{ branchname="https://www.kreditwesen.org",
state="COLLAPSED",
},
{ branchname="https://www.handelszeitung.ch",
state="COLLAPSED",
 "https://www.handelszeitung.ch/unternehmen/top-100-die-grossten-finanzinstitute",},
{ branchname="https://www.gabler-banklexikon.de",
state="COLLAPSED",
 "https://www.gabler-banklexikon.de/definition/finanzinstitut-der-crr-99740",},
{ branchname="https://www.credit-suisse.com",
state="COLLAPSED",
},
{ branchname="https://www.bundesbank.de",
state="COLLAPSED",
},
},
{ branchname="Bausparkassen",
state="COLLAPSED",
{ branchname="https://www.wuestenrot.de",
state="COLLAPSED",
},
},
{ branchname="Zinsberechnungen",
state="COLLAPSED",
{ branchname="https://www.zinsentwicklung.de",
state="COLLAPSED",
},
{ branchname="https://kursprognose.com",
state="COLLAPSED",
},
{ branchname="https://www.zinsen-berechnen.de",
state="COLLAPSED",
},
},
{ branchname="Aktien",
state="COLLAPSED",
{ branchname="https://www.onvista.de",
state="COLLAPSED",
},
{ branchname="https://www.ariva.de",
state="COLLAPSED",
},
{ branchname="https://www.finance-magazin.de",
state="COLLAPSED",
},
{ branchname="https://www.boerse.de",
state="COLLAPSED",
},
{ branchname="https://www.finanznachrichten.de",
state="COLLAPSED",
},
{ branchname="https://www.boerse-online.de",
state="COLLAPSED",
},
{ branchname="https://www.finanzen.net",
 "https://www.finanzen.net/wirtschaftslexikon/finanzinstitut",},
},
{ branchname="https://www.wiwo.de",
state="COLLAPSED",
},
{ branchname="https://wirtschaft.com",
state="COLLAPSED",
},
{ branchname="https://bwl-wissen.net",
state="COLLAPSED",
},
{ branchname="https://www.bwl-lexikon.de",
state="COLLAPSED",
},
{ branchname="https://girokonto.focus.de",
state="COLLAPSED",
},
{ branchname="https://www.aktien.net",
state="COLLAPSED",
},
{ branchname="https://www.rechnungswesen-verstehen.de",
state="COLLAPSED",
},
{ branchname="https://www.handelsblatt.com",
state="COLLAPSED",
},
{ branchname="https://www.business-wissen.de",
 "https://www.business-wissen.de/hb/risiken-identifizieren",},
{ branchname="https://wirtschaftslexikon.gabler.de",
 "https://wirtschaftslexikon.gabler.de/definition/mensch-maschine-interaktion-54079", "https://wirtschaftslexikon.gabler.de/definition/risiko-44896",
},
},
{ branchname="Controlling",
state="COLLAPSED",
{ branchname="https://www.lexoffice.de",
state="COLLAPSED",
},
{ branchname="https://www.controllingportal.de",
state="COLLAPSED",
},
},
{ branchname="Sprachen",
state="COLLAPSED",
{ branchname="Übersetzung",
state="COLLAPSED",
{ branchname="https://www.babelfish.de",
state="COLLAPSED",
},
{ branchname="https://translate.google.de",
state="COLLAPSED",
},
{ branchname="https://www.translator.eu",
state="COLLAPSED",
 "https://www.translator.eu/deutsch",},
{ branchname="https://woerterbuch.reverso.net",
state="COLLAPSED",
 "https://woerterbuch.reverso.net/englisch-deutsch",},
{ branchname="https://www.deepl.com",
state="COLLAPSED",
 "https://www.deepl.com/de/translator",},
{ branchname="https://de.pons.com",
state="COLLAPSED",
 "https://de.pons.com/übersetzung",},
{ branchname="https://www.dict.cc",
state="COLLAPSED",
 "https://www.dict.cc/?s=Übersetzung",},
{ branchname="https://dict.leo.org",
state="COLLAPSED",
 "https://dict.leo.org/englisch-deutsch",},
},
{ branchname="https://link.springer.com",
state="COLLAPSED",
 "https://link.springer.com/article/10.1007/s40664-018-0267-8", "https://link.springer.com/article/10.1007/s40664-019-00370-w",
 "https://link.springer.com/chapter/10.1007/978-3-658-04195-3_1",
},
{ branchname="https://www.duden.de",
state="COLLAPSED",
 "https://www.duden.de/rechtschreibung/Risiko", "https://www.duden.de/rechtschreibung/Kreditwesen",
},
{ branchname="https://www.dwds.de",
state="COLLAPSED",
 "https://www.dwds.de/wb/Risiko", "https://www.dwds.de/wb/Finanzinstitut",
},
{ branchname="https://www.linguee.com",
state="COLLAPSED",
},
{ branchname="https://www.linguee.de",
state="COLLAPSED",
 "https://www.linguee.de/deutsch-englisch/uebersetzung/information+sortieren.html", "https://www.linguee.de/deutsch-spanisch/uebersetzung/suche+verfeinern.html",
 "https://www.linguee.de/deutsch-portugiesisch/uebersetzung/suche+verfeinern.html",
},
},
{ branchname="Risikoanalyse",
state="COLLAPSED",
{ branchname="https://www.kmu.admin.ch",
state="COLLAPSED",
 "https://www.kmu.admin.ch/kmu/de/home/praktisches-wissen/finanzielles/risikomanagement/wie-fuehrt-man-ein-risikomanagementsystem-ein/risikoidentifikation-und-risikobewertung.html",},
{ branchname="https://iberima.ch",
state="COLLAPSED",
 "https://iberima.ch/risiken-identifizieren",},
{ branchname="https://www.haufe.de",
state="COLLAPSED",
 "https://www.haufe.de/finance/haufe-finance-office-premium/instrumente-fuer-eine-systematische-identifikation-von-risiken_idesk_PI20354_HI10881190.html",},
{ branchname="https://www.risknet.de",
 "https://www.risknet.de/wissen/glossar-eintrag/risiko-definition", "https://www.risknet.de/fileadmin/downloads/Risiko_Checkliste_RiskNET.pdf",
},
{ branchname="https://www.consulting-life.de",
state="COLLAPSED",
},
{ branchname="https://www.projektmagazin.de",
state="COLLAPSED",
},
{ branchname="https://projektmanagement-manufaktur.de",
state="COLLAPSED",
},
{ branchname="https://projekte-leicht-gemacht.de",
state="COLLAPSED",
},
{ branchname="https://www.projektmanagement-mentor.de",
state="COLLAPSED",
},
},
{ branchname="Software-Entwicklung",
state="COLLAPSED",
{ branchname="Breadcrumb",
state="COLLAPSED",
{ branchname="https://elementor.com",
state="COLLAPSED",
 "https://elementor.com/blog/breadcrumbs-web-design",},
{ branchname="https://vwo.com",
state="COLLAPSED",
 "https://vwo.com/blog/why-use-breadcrumbs",},
{ branchname="https://www.semrush.com",
state="COLLAPSED",
 "https://www.semrush.com/blog/breadcrumbs-for-websites",},
{ branchname="https://blog.hubspot.com",
state="COLLAPSED",
 "https://blog.hubspot.com/marketing/navigation-breadcrumbs",},
},
{ branchname="https://forum.selfhtml.org",
state="COLLAPSED",
 "https://forum.selfhtml.org/self/2009/jul/30/mysql-suche-verfeinern-wie-muss-der-query-veraendert-werden/1383745?rm=nested",},
{ branchname="https://praxistipps.chip.de",
state="COLLAPSED",
 "https://praxistipps.chip.de/richtig-googeln-so-verfeinern-sie-ihre-suchergebnisse_10037",},
{ branchname="https://forum.jtl-software.de",
state="COLLAPSED",
 "https://forum.jtl-software.de/threads/suche-verfeinern-merkmale.33208",},
{ branchname="https://www.runoob.com",
 "https://www.runoob.com/python/python-gui-tkinter.html",},
{ branchname="https://www.tutorialsteacher.com",
state="COLLAPSED",
 "https://www.tutorialsteacher.com/python/create-gui-using-tkinter-python",},
{ branchname="https://www.geeksforgeeks.org",
state="COLLAPSED",
 "https://www.geeksforgeeks.org/python-gui-tkinter", "https://www.geeksforgeeks.org/create-countdown-timer-using-python-tkinter",
},
{ branchname="https://www.w3schools.in",
state="COLLAPSED",
 "https://www.w3schools.in/python-tutorial/gui-programming",},
{ branchname="https://www.it-business.de",
state="COLLAPSED",
},
{ branchname="https://de.switch-case.com",
state="COLLAPSED",
 "https://de.switch-case.com/53689106",},
{ branchname="Microsoft",
state="COLLAPSED",
{ branchname="C# mit Lua",
state="COLLAPSED",
{ branchname="https://ttuxen.wordpress.com",
state="COLLAPSED",
 "https://ttuxen.wordpress.com/2009/11/03/embedding-lua-in-dotnet",},
{ branchname="https://csharp.hotexamples.com",
state="COLLAPSED",
 "https://csharp.hotexamples.com/examples/NLua/Lua/RegisterFunction/php-lua-registerfunction-method-examples.html",},
{ branchname="https://www.c-sharpcorner.com",
state="COLLAPSED",
 "https://www.c-sharpcorner.com/article/rest-api-csharp-console-application",},
{ branchname="https://dotnettutorials.net",
state="COLLAPSED",
 "https://dotnettutorials.net/lesson/console-class-methods-properties-csharp",},
{ branchname="https://www.csharp-console-examples.com",
state="COLLAPSED",
 "https://www.csharp-console-examples.com/csharp-console/c-console-examples",},
{ branchname="https://qawithexperts.com",
state="COLLAPSED",
 "https://qawithexperts.com/article/c-sharp/connect-to-sql-server-in-c-example-using-console-application/178", "https://qawithexperts.com/article/c-sharp/simple-c-code-examples-with-output-console-application-examp/279",
},
{ branchname="https://www.guru99.com",
state="COLLAPSED",
 "https://www.guru99.com/c-sharp-fundamentals-arrays-enumeration.html",},
{ branchname="https://makolyte.com",
state="COLLAPSED",
 "https://makolyte.com/csharp-parsing-commands-and-arguments-in-a-console-app",},
{ branchname="https://www.moonsharp.org",
{ branchname="https://www.moonsharp.org/about.html",
{ branchname="C:\\Users\\RK\\Downloads\\moonsharp_release_2.0.0.0.zip",
{ branchname="Refer to the documentation of your IDE to add MoonSharp.Interpreter.dll, contained in the folder of the target of your choice as a dependency.",
{ branchname="C:\\Tree\\Tree_Csharp\\MoonSharp.Interpreter.dll",
state="COLLAPSED",
},
},
},
},
},
},
{ branchname="https://docs.microsoft.com",
 "https://docs.microsoft.com/en-us/dotnet/core/tutorials/with-visual-studio", "https://docs.microsoft.com/en-us/visualstudio/get-started/csharp/tutorial-console",
 "https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.treeview",
 "https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.treeview",
 "https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.tools.excel.controls.treeview",
 "https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.tools.word.controls.treeview",
},
{ branchname="https://social.msdn.microsoft.com",
state="COLLAPSED",
 "https://social.msdn.microsoft.com/Forums/office/en-US/ec9284be-ef46-424f-a735-ec7e2088e9f0/treeviewcontrol-for-access-64bit",},
{ branchname="https://answers.microsoft.com",
state="COLLAPSED",
 "https://answers.microsoft.com/en-us/msoffice/forum/all/looking-for-the-treeview-control-in-excel/2bf71cbc-4c24-43cf-8253-2c93c08a65cf",},
{ branchname="https://jkp-ads.com",
state="COLLAPSED",
 "https://jkp-ads.com/Articles/treeview.asp",},
{ branchname="https://www.codekabinett.com",
state="COLLAPSED",
 "https://www.codekabinett.com/rdumps.php?Lang=2&targetDoc=mscomctl-treeview-x64-access",},
{ branchname="https://support.microsoft.com",
state="COLLAPSED",
},
},
{ branchname="Linux",
state="COLLAPSED",
{ branchname="https://forum-raspberrypi.de",
state="COLLAPSED",
},
{ branchname="https://wiki.ubuntuusers.de",
state="COLLAPSED",
},
{ branchname="https://code-examples.net",
state="COLLAPSED",
},
},
{ branchname="Python",
state="COLLAPSED",
{ branchname="https://pythonbasics.org",
state="COLLAPSED",
 "https://pythonbasics.org/tkinter",},
{ branchname="https://docs.python.org",
state="COLLAPSED",
 "https://docs.python.org/3/library/tkinter.html",},
{ branchname="https://realpython.com",
state="COLLAPSED",
 "https://realpython.com/python-gui-tkinter",},
{ branchname="https://www.python.org",
state="COLLAPSED",
},
{ branchname="https://www.python-forum.de",
state="COLLAPSED",
},
{ branchname="https://wiki.pythonde.pysv.org",
state="COLLAPSED",
},
{ branchname="https://www.python-lernen.de",
state="COLLAPSED",
},
},
{ branchname="Lua-Programmierung",
state="COLLAPSED",
{ branchname="IUP-Lua",
{ branchname="C:\\Lua",
state="COLLAPSED",
},
{ branchname="https://documentation.help",
 "https://documentation.help/IUP2.2.2/iuplua.html", "https://documentation.help/IUP2.3/iuplua.html",
},
{ branchname="https://news.ycombinator.com",
 "https://news.ycombinator.com/item?id=12287816",},
{ branchname="https://stackovergo.com",
 "https://stackovergo.com/de/tag/iup",},
{ branchname="https://webserver2.tecgraf.puc-rio.br",
{ branchname="https://www.generacodice.com",
 "https://www.generacodice.com/en/articolo/826486/How-to-display-a-progress-Bar-using-Lua-and-IUP", "https://www.generacodice.com/en/articolo/58761/Obtenir-des-contributions-avec-IUP-à-Lua",
},
{ branchname="https://freebasic.net",
 "https://freebasic.net/forum/viewtopic.php?t=14869",},
 "https://webserver2.tecgraf.puc-rio.br/iup", "https://webserver2.tecgraf.puc-rio.br/iup/en/basic/index.html",
},
{ branchname="https://www.tecgraf.puc-rio.br",
 "https://www.tecgraf.puc-rio.br/webbook/", "https://www.tecgraf.puc-rio.br/iup",
 "https://www.tecgraf.puc-rio.br/iup/en/elem/iupimage.html",
},
{ branchname="https://www.beckmann-partner.de",
state="COLLAPSED",
 "https://www.beckmann-partner.de/beckprojekt/p15-00197-54862",},
},
{ branchname="https://lua-love.com",
state="COLLAPSED",
},
{ branchname="Lua",
{ branchname="https://www.lua.org",
 "https://www.lua.org/wshop09/iupcdim_wlua2009_en.pdf", "http://www.lua.org/demo.html",
 "https://www.lua.org/manual/5.1/de/manual.html",
},
},
{ branchname="Java",
state="COLLAPSED",
{ branchname="https://www.java.com",
state="COLLAPSED",
},
{ branchname="https://java-update.updatestar.com",
state="COLLAPSED",
},
{ branchname="https://java-64-bit.updatestar.com",
state="COLLAPSED",
},
{ branchname="https://www.oracle.com",
state="COLLAPSED",
},
},
{ branchname="https://www.pcwelt.de",
state="COLLAPSED",
},
{ branchname="https://www.w3schools.com",
 "https://www.w3schools.com/howto/howto_css_breadcrumbs.asp",},
{ branchname="https://www.computerbild.de",
state="COLLAPSED",
},
{ branchname="https://github.com",
state="COLLAPSED",
 "https://github.com/yanghuan/CSharp.lua", "https://github.com/NLua",
 "https://github.com/OfficeDev/office-ui-fabric-core/issues/238",

{ branchname="https://github.com/jasonsantos/luajava",
 "https://github.com/tempbottle/luajava",
{ branchname="loadstring durch load ersetzt wegen der neuen Luajava-Version",
{ branchname="Start mit: cd C:\\Tree\\LuaJ_Tree",
 "C:\\jdk-16.0.2\\bin\\java.exe -classpath Tree.jar lua C:\\Temp\\awtTest.lua", "C:\\jdk-16.0.2\\bin\\java.exe -classpath Tree.jar lua C:\\Temp\\swingTest.lua",
},
 "C:\\Temp\\awtTest.lua", "C:\\Temp\\swingTest.lua",
},
},
 "https://github.com/mkottman/AndroLua", "https://github.com/luaj/luaj",
 "https://github.com/luaj",
 "https://github.com/LuaDist/iup",
 "https://github.com/xushiwei/iup/blob/master/srclua5/iuplua.lua",
},
{ branchname="https://sourceforge.net",
 "https://sourceforge.net/projects/iup/files/3.30/Tools", "https://sourceforge.net/projects/iup",
 "https://sourceforge.net/projects/luajava",
 "https://sourceforge.net/projects/luaj",
},
{ branchname="https://stackoverflow.com",
state="COLLAPSED",
 "https://stackoverflow.com/questions/63245524/install-lua-5-4-binaries-and-libraries-step-by-step-on-windows", "https://stackoverflow.com/questions/4605235/advanced-console-application",
 "https://stackoverflow.com/questions/22267758/how-to-embed-lua-or-some-other-scripting-language-in-a-c-sharp-5-0-application",
 "https://stackoverflow.com/questions/47895765/use-asyncio-and-tkinter-or-another-gui-lib-together-without-freezing-the-gui",
 "https://stackoverflow.com/questions/tagged/luajava",
 "https://stackoverflow.com/tags/luajava/info",
 "https://stackoverflow.com/questions/32597675/luaj-how-to-import-or-require-a-lua-function-library",
 "https://stackoverflow.com/questions/821893/getting-input-with-iup-in-lua",
},
{ branchname="https://askubuntu.com",
state="COLLAPSED",
},
{ branchname="https://www.computerbase.de",
state="COLLAPSED",
},
{ branchname="https://www.chip.de",
state="COLLAPSED",
},
{ branchname="https://www.heise.de",
 "https://www.heise.de/hintergrund/Einstieg-in-die-Lua-Programmierung-mit-einer-simplen-Zeiterfassung-5052196.html",}}}}}--lua_tree_output


----[====[This programm has webpages within the Lua script which can contain a tree in html


--1. basic data


--1.1.1 libraries
require("iuplua")           --require iuplua for GUIs


--1.1.2 initalize clipboard
clipboard=iup.clipboard{}

--1.1.3 empty temporary tree needed to copy node with all its child nodes
tree_temp={} --An Zuordnung senden, Verdoppeln

--1.1.4 math.integer for Lua 5.1 and Lua 5.2
if _VERSION=='Lua 5.1' then
	function math.tointeger(a) return a end
elseif _VERSION=='Lua 5.2' then
	function math.tointeger(a) return a end
end --if _VERSION=='Lua 5.1' then


--1.1.5 securisation by allowing only necessary os.execute commands
do --sandboxing
	local old=os.date("%H%M%S")
	local secureTable={}
	secureTable[old]=os.execute
	function os.execute(a)
		if 
		a:lower():match("^sftp ") or
		a:lower():match("^dir ") or
		a:lower():match("^pause") or
		a:lower():match("^title") or
		a:lower():match("^md ") or
		a:lower():match("^copy ") or
		a:lower():match("^color ") or
		a:lower():match("^start ") or
		a:lower():match("^cls") 
		then
			return secureTable[old](a)
		else
			print(a .." ist nicht erlaubt.")
		end --if a:match("del") then 
	end --function os.execute(a)
	secureTable[old .. "1"]=io.popen
	function io.popen(a)
		if 
		a:lower():match("^dir ") or
		a:lower():match('^"dir ') 
		then
			return secureTable[old .. "1"](a)
		else
			print(a .." ist nicht erlaubt.")
		end --if a:match("del") then 
	end --function io.popen(a)
end --do --sandboxing

--1.2 color section
--1.2.1 color of the console associated with the graphical user interface if started with lua54.exe and not wlua54.exe
os.execute('color 71')

--1.2.2 colors
color_red="135 131 28"
color_light_color_grey="96 197 199"
color_grey="162 163 165"
color_blue="18 132 86"

--1.2.3 color definitions
color_background=color_light_color_grey
color_buttons=color_blue -- works only for flat buttons
color_button_text="255 255 255"
color_background_tree="246 246 246"


--2. path of the graphical user interface and filename of this script
path=arg[0]:match("(.*)\\")
--test with: print(path)
thisfilename=arg[0]:match("\\([^\\]+)$")
--test with: print(arg[0])
--test with: print(thisfilename)

--3. functions


--3 functions

--3.1 simplified version of table.move for Lua 5.1 and Lua 5.2 that is enough for using of table.move here
if _VERSION=='Lua 5.1' or _VERSION=='Lua 5.2' then
	function table.move(a,f,e,t)
	for i=f,e do
		local j=i-f
		a[t+j]=a[i]
	end --for i=f,e do
	return a 
	end --function table.move(a,f,e,t)
end --if _VERSION=='Lua 5.1' then

--3.1.1 function checking if file exits
function file_exists(name)
   local f=io.open(name,"r")
   if f~=nil then io.close(f) return true else return false end
end --function file_exists(name)


--3.2 function escaping magic characters
function string.escape_forbidden_char(insertstring) --this function takes a string and returns the same string with escaped characters
	return insertstring:gsub("\\", "\\\\"):gsub("\"", "\\\""):gsub("\'", "\\\'"):gsub("\n", "\\n"):gsub("\r", "\\n")
end --function string.escape_forbidden_char(insertstring)

--3.3 function which saves the current iup tree as a Lua table
function save_reflexive_tree_to_lua(outputfile_path)
	--read the programm of the file itself, commentSymbol is used to have another pattern here as searched
	inputfile=io.open(path .. "\\" .. thisfilename,"r")
	commentSymbol,inputTextProgramm=inputfile:read("*a"):match("lua_tree_output={.*}(%-%-)lua_tree_output(.*)")
	inputfile:close()
	--save the tree
	local output_tree_text="lua_tree_output=" --the output string
	local outputfile=io.output(outputfile_path) --a output file
	for i=0,tree.count - 1 do --loop for all nodes
		if tree["KIND" .. i ]=="BRANCH" then --consider cases, if actual node is a branch
			if (i > 0 and (tonumber(tree["DEPTH" .. i ]) > tonumber(tree["DEPTH" .. i-1 ]) ) ) or i==0 then --consider cases if depth increases
				output_tree_text = output_tree_text .. '{ branchname="' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n' -- we open a new branch
				--save state
				if tree["STATE" .. i ]=="COLLAPSED" then
					output_tree_text = output_tree_text .. 'state="COLLAPSED",\n'
				end --if tree["STATE" .. i ]=="COLLAPSED" then
			elseif i > 0 and tonumber(tree["DEPTH" .. i ]) < tonumber(tree["DEPTH" .. i-1 ]) then --if depth decreases
				if tree["KIND" .. i-1 ] == "BRANCH" then --depending if the predecessor node was a branch we need to close one bracket more
					for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) +1 do
						output_tree_text = output_tree_text .. '},\n'
					end --for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) +1 do
					output_tree_text = output_tree_text .. '{ branchname="' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n' --and we open the new branch
					--save state
					if tree["STATE" .. i ]=="COLLAPSED" then
						output_tree_text = output_tree_text .. 'state="COLLAPSED",\n'
					end --if tree["STATE" .. i ]=="COLLAPSED" then
				else
					for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) do -- or if the predecessor node was a leaf
						output_tree_text = output_tree_text .. '},\n'
					end --for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) do
					output_tree_text = output_tree_text .. '{ branchname="' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n' --and we open the new branch
					--save state
					if tree["STATE" .. i ]=="COLLAPSED" then
						output_tree_text = output_tree_text .. 'state="COLLAPSED",\n'
					end --if tree["STATE" .. i ]=="COLLAPSED" then
				end --if tree["KIND" .. i-1 ] == "BRANCH" then
			elseif i > 0 and tonumber(tree["DEPTH" .. i ]) == tonumber(tree["DEPTH" .. i-1 ]) then --or if depth stays the same
				if tree["KIND" .. i-1 ] == "BRANCH" then --again consider if the predecessor node was a branch
					output_tree_text = output_tree_text .. '},\n{ branchname="' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n'
					--save state
					if tree["STATE" .. i ]=="COLLAPSED" then
						output_tree_text = output_tree_text .. 'state="COLLAPSED",\n'
					end --if tree["STATE" .. i ]=="COLLAPSED" then
				else --or a leaf
					output_tree_text = output_tree_text .. '\n{ branchname="' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n'
					--save state
					if tree["STATE" .. i ]=="COLLAPSED" then
						output_tree_text = output_tree_text .. 'state="COLLAPSED",\n'
					end --if tree["STATE" .. i ]=="COLLAPSED" then
				end --if tree["KIND" .. i-1 ] == "BRANCH" then
			end --if (i > 0 and (tonumber(tree["DEPTH" .. i ]) > tonumber(tree["DEPTH" .. i-1 ]) ) ) or i==0 then
		elseif tree["KIND" .. i ]=="LEAF" then --or if actual node is a leaf
			if (i > 0 and tonumber(tree["DEPTH" .. i ]) > tonumber(tree["DEPTH" .. i-1 ]) )  or i==0 then
				output_tree_text = output_tree_text .. ' "' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '",' --we add the leaf
			elseif i > 0 and tonumber(tree["DEPTH" .. i ]) < tonumber(tree["DEPTH" .. i-1 ]) then
				if tree["KIND" .. i-1 ] == "LEAF" then --in the same manner as above, depending if the predecessor node was a leaf or branch, we have to close a different number of brackets
					for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) do
						output_tree_text = output_tree_text .. '},\n'
					end --for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) do
					output_tree_text = output_tree_text .. ' "' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '",' --and in each case we add the new leaf
				else
					for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) +1 do
						output_tree_text = output_tree_text .. '},\n'
					end --for j=1, tonumber(tree["DEPTH" .. i-1 ])- tonumber(tree["DEPTH" .. i ]) +1 do
					output_tree_text = output_tree_text .. ' "' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '",'
				end --if tree["KIND" .. i-1 ] == "LEAF" then
			elseif i > 0 and tonumber(tree["DEPTH" .. i ]) == tonumber(tree["DEPTH" .. i-1 ]) then
				if tree["KIND" .. i-1 ] == "LEAF" then
					output_tree_text = output_tree_text .. ' "' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n'
				else
					output_tree_text = output_tree_text .. '},\n "' .. string.escape_forbidden_char(tree["TITLE" .. i ]) .. '", \n'
				end --if tree["KIND" .. i-1 ] == "LEAF" then
			end --if (i > 0 and tonumber(tree["DEPTH" .. i ]) > tonumber(tree["DEPTH" .. i-1 ]) )  or i==0 then
		end --if tree["KIND" .. i ]=="BRANCH" then
	end --for i=0,tree.count - 1 do
	for j=1, tonumber(tree["DEPTH" .. tree.count-1]) do
		output_tree_text = output_tree_text .. "}" --close as many brackets as needed
	end --for j=1, tonumber(tree["DEPTH" .. tree.count-1]) do
	if tree["KIND" .. tree.count-1]=="BRANCH" then
		output_tree_text = output_tree_text .. "}" -- we need to close one more bracket if last node was a branch
	end --if tree["KIND" .. tree.count-1]=="BRANCH" then
	--output_tree_text=string.escape_forbidden_char(output_tree_text)
	outputfile:write(output_tree_text .. "--lua_tree_output") --write everything into the outputfile
	--write the programm for the data in itself
	outputfile:write(inputTextProgramm)
	outputfile:close()
end --function save_reflexive_tree_to_lua(outputfile_path)

--4. dialogs

--4.1 rename dialog
--ok button
ok = iup.flatbutton{title = "OK",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text}
function ok:flat_action()
	tree.title = text.value
	return iup.CLOSE
end --function ok:flat_action()

--cancel button
cancel = iup.flatbutton{title = "Abbrechen",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text}
function cancel:flat_action()
	return iup.CLOSE
end --function cancel:flat_action()

text = iup.multiline{size="120x50",border="YES",expand="YES",wordwrap="YES"} --textfield
label1 = iup.label{title="Name:"}--label for textfield

--open the dialog for renaming branch/leaf
dlg_rename = iup.dialog{
	iup.vbox{label1, text, iup.hbox{ok,cancel}}; 
	title="Knoten bearbeiten",
	size="QUARTER",
	startfocus=text,
	}

--4.1 rename dialog end


--4.2 search dialog
searchtext = iup.multiline{border="YES",expand="YES", SELECTION="ALL",wordwrap="YES"} --textfield for search

--search in downward direction
searchdown    = iup.flatbutton{title = "Abwärts",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text} 
function searchdown:flat_action()
	local help=false
	--downward search
	if checkboxforcasesensitive.value=="ON"  then
		for i=tree.value + 1, tree.count-1 do
			if tree["title" .. i]:match(searchtext.value)~= nil then
				tree.value= i
				help=true
				break
			end --if tree["title" .. i]:match(searchtext.value)~= nil then
		end --for i=tree.value + 1, tree.count-1 do
	else
		for i=tree.value + 1, tree.count-1 do
			if tree["title" .. i]:lower():match(searchtext.value:lower())~= nil then
				tree.value= i
				help=true
				break
			end --if tree["title" .. i]:lower():match(searchtext.value:lower())~= nil then
		end --for i=tree.value + 1, tree.count-1 do
	end --if checkboxforcasesensitive.value=="ON" then
	if help==false then
		iup.Message("Suche","Ende des Baumes erreicht.")
		tree.value=0 --starting again from the top
		iup.NextField(maindlg)
		iup.NextField(dlg_search)
	end --if help==false then
end --function searchdown:flat_action()

--search to mark without going to the any node
searchmark    = iup.flatbutton{title = "Markieren",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text} 
function searchmark:flat_action()
	--unmark all nodes
	for i=0, tree.count - 1 do
			tree["color" .. i]="0 0 0"
	end --for i=0, tree.count - 1 do
	--unmark all nodes end
	--mark all nodes
	for i=0, tree.count - 1 do
		if tree["title" .. i]:upper():match(searchtext.value:upper())~= nil then
			iup.TreeSetAncestorsAttributes(tree,i,{color="255 0 0",})
			iup.TreeSetNodeAttributes(tree,i,{color="0 0 250",})
			iup.TreeSetDescendantsAttributes(tree,i,{color="90 195 0"})
		end --if tree["title" .. i]:upper():match(searchtext.value:upper())~= nil then
	end --for i=0, tree.count - 1 do
	--mark all nodes end
	for i=0, tree.count - 1 do
		--search in text files if checkbox on
		if checkboxforsearchinfiles.value=="ON"  and file_exists(tree["title" .. i]) 
			and (tree["title" .. i]:lower():match("^.:\\.*%.txt$")
			 or tree["title" .. i]:lower():match("^.:\\.*%.sas$") 
			 or tree["title" .. i]:lower():match("^.:\\.*%.csv$") 
			 or tree["title" .. i]:lower():match("^.:\\.*%.lua%d*$")
			 or tree["title" .. i]:lower():match("^.:\\.*%.iup%d*lua%d*$")
			 or tree["title" .. i]:lower():match("^.:\\.*%.wlua$")
			)
			then
			DateiFundstelle=""
			for textLine in io.lines(tree["title" .. i]) do if textLine:lower():match(searchtext.value:lower()) then DateiFundstelle=DateiFundstelle .. textLine .. "\n"  end end
			if DateiFundstelle~="" then
				iup.TreeSetAncestorsAttributes(tree,i,{color="255 0 0",})
				iup.TreeSetNodeAttributes(tree,i,{color="0 0 250",})
				iup.TreeSetDescendantsAttributes(tree,i,{color="90 195 0"})
			end --if DateiFundstelle~="" then
		end --if checkboxforsearchinfiles.value=="ON"  and file_exists(tree["title" .. i])
		--search in text files if checkbox on end
	end --for i=0, tree.count - 1 do
end --function searchmark:flat_action()

--unmark without leaving the search-window
unmark    = iup.flatbutton{title = "Entmarkieren",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text} 
function unmark:flat_action()
--unmark all nodes
for i=0, tree.count - 1 do
	tree["color" .. i]="0 0 0"
end --for i=0, tree.count - 1 do
--unmark all nodes end
end --function unmark:flat_action()

--search in upward direction
searchup   = iup.flatbutton{title = "Aufwärts",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text} 
function searchup:flat_action()
	local help=false
	--upward search
	if checkboxforcasesensitive.value=="ON" then
		for i=tree.value - 1, 0, -1 do
			if tree["title" .. i]:match(searchtext.value)~= nil then
				tree.value= i
				help=true
				break
			end --if tree["title" .. i]:match(searchtext.value)~= nil then
		end --for i=tree.value - 1, 0, -1 do
	else
		for i=tree.value - 1, 0, -1 do
			if tree["title" .. i]:lower():match(searchtext.value:lower())~= nil then
				tree.value= i
				help=true
				break
			end --if tree["title" .. i]:lower():match(searchtext.value:lower())~= nil then
		end --for i=tree.value - 1, 0, -1 do
	end --if checkboxforcasesensitive.value=="ON" then
	if help==false then
		iup.Message("Suche","Anfang des Baumes erreicht.")
		tree.value=tree.count-1 --starting again from the bottom
		iup.NextField(maindlg)
		iup.NextField(dlg_search)
	end --if help==false then
end --	function searchup:flat_action()

checkboxforcasesensitive = iup.toggle{title="Groß-/Kleinschreibung", value="OFF"} --checkbox for casesensitiv search
checkboxforsearchinfiles = iup.toggle{title="Suche in den Textdateien", value="OFF"} --checkbox for searcg in text files
search_label=iup.label{title="Suchfeld:"} --label for textfield


--search searchtext.value in textbox1
search_in_textbox1   = iup.flatbutton{title = "Suche in der Vorschau",size="EIGHTH", BGCOLOR=color_buttons, FGCOLOR=color_button_text} 
searchPosition=1
function search_in_textbox1:flat_action()
from,to=textbox1.value:find(searchtext.value,searchPosition)
searchPosition=to
if from==nil then 
searchPosition=1 
iup.Message("Suchtext im Textfeld nicht gefunden","Suchtext im Textfeld nicht gefunden")
else
textbox1.SELECTIONPOS=from-1 .. ":" .. to
end --if from==nil then 
end --	function search_in_textbox1:flat_action()


--put above together in a search dialog
dlg_search =iup.dialog{
			iup.vbox{iup.hbox{search_label,searchtext,}, 

			iup.label{title="Sonderzeichen: %. für ., %- für -, %+ für +, %% für %, %[ für [, %] für ], %( für (, %) für ), %^ für ^, %$ für $, %? für ?",},
			iup.hbox{searchmark,unmark,checkboxforsearchinfiles,}, 
			iup.label{title="rot: übergeordnete Knoten",fgcolor = "255 0 0", },
			iup.label{title="blau: gleicher Knoten",fgcolor = "0 0 255", },
			iup.label{title="grün: untergeordnete Knoten",fgcolor = "90 195 0", },
			iup.hbox{searchdown, searchup,checkboxforcasesensitive,},
			iup.hbox{search_in_textbox1,},

			}; 
		title="Suchen",
		size="420x100",
		startfocus=searchtext
		}

--4.2 search dialog end



--5. context menus (menus for right mouse click)

--5.1 menu of tree
--5.1.1 copy node of tree
startcopy = iup.item {title = "Knoten kopieren"}
function startcopy:action() --copy node
	 clipboard.text = tree['title']
end --function startcopy:action()

--5.1.2 rename node and rename action for other needs of tree
renamenode = iup.item {title = "Knoten bearbeiten"}
function renamenode:action()
	text.value = tree['title']
	dlg_rename:popup(iup.CENTER, iup.CENTER) --popup rename dialog
	iup.SetFocus(tree)
end --function renamenode:action()

--5.1.3 add branch to tree
addbranch = iup.item {title = "Ast hinzufügen"}
function addbranch:action()
	tree.addbranch = ""
	tree.value=tree.value+1
	renamenode:action()
end --function addbranch:action()

--5.1.3.1 add branch to tree by insertbranch
addbranchbottom = iup.item {title = "Ast darunter hinzufügen"}
function addbranchbottom:action()
	tree["insertbranch" .. tree.value] = ""
	for i=tree.value+1,tree.count-1 do
		if tree["depth" .. i]==tree["depth" .. tree.value] then
			tree.value=i
			renamenode:action()
			break
		end --if tree["depth" .. i]==tree["depth" .. tree.value] then
	end --for i=tree.value+1,tree.count-1 do
end --function addbranchbottom:action()

--5.1.3.2 add leaf to tree by insertleaf
addleafbottom = iup.item {title = "Blatt darunter hinzufügen"}
function addleafbottom:action()
	tree["insertleaf" .. tree.value] = ""
	for i=tree.value+1,tree.count-1 do
		if tree["depth" .. i]==tree["depth" .. tree.value] then
			tree.value=i
			renamenode:action()
			break
		end --if tree["depth" .. tree.value+1]==tree["depth" .. tree.value] then
	end --for i=tree.value+1,tree.count-1 do
end --function addleafbottom:action()

--5.1.4 add branch of tree from clipboard
addbranch_fromclipboard = iup.item {title = "Ast aus Zwischenablage"}
function addbranch_fromclipboard:action()
	tree.addbranch = clipboard.text
	tree.value=tree.value+1
end --function addbranch_fromclipboard:action()

--5.1.4.1 add branch to tree by insertbranch from clipboard
addbranch_fromclipboardbottom = iup.item {title = "Ast darunter aus Zwischenablage"}
function addbranch_fromclipboardbottom:action()
	tree["insertbranch" .. tree.value]= clipboard.text
	for i=tree.value+1,tree.count-1 do
		if tree["depth" .. i]==tree["depth" .. tree.value] then
			tree.value=i
			break
		end --if tree["depth" .. i]==tree["depth" .. tree.value] then
	end --for i=tree.value+1,tree.count-1 do
end --function addbranch_fromclipboardbottom:action()

--5.1.4.2 add leaf to tree by insertleaf from clipboard
addleaf_fromclipboardbottom = iup.item {title = "Blatt darunter aus Zwischenablage"}
function addleaf_fromclipboardbottom:action()
	tree["insertleaf" .. tree.value] = clipboard.text
	for i=tree.value+1,tree.count-1 do
	if tree["depth" .. i]==tree["depth" .. tree.value] then
		tree.value=i
		break
	end --if tree["depth" .. tree.value+1]==tree["depth" .. tree.value] then
	end --for i=tree.value+1,tree.count-1 do
end --function addleaf_fromclipboardbottom:action()

--5.1.5 add leaf of tree
addleaf = iup.item {title = "Blatt hinzufügen"}
function addleaf:action()
	tree.addleaf = ""
	tree.value=tree.value+1
	renamenode:action()
end --function addleaf:action()

--5.1.6 add leaf of tree from clipboard
addleaf_fromclipboard = iup.item {title = "Blatt aus Zwischenablage"}
function addleaf_fromclipboard:action()
	tree.addleaf = clipboard.text
	tree.value=tree.value+1
end --function addleaf_fromclipboard:action()

--5.1.7 copy a version of the file selected in the tree and give it the next version number
startversion = iup.item {title = "Version Archivieren"}
function startversion:action()
	--get the version of the file
	if tree['title']:match(".:\\.*%.[^\\]+") then
		Version=0
		p=io.popen('dir "' .. tree['title']:gsub("(%.+)","_Version*%1") .. '" /b/o')
		for Datei in p:lines() do 
			--test with: iup.Message("Version",Datei) 
			if Datei:match("_Version(%d+)") then Version_alt=Version Version=tonumber(Datei:match("_Version(%d+)")) if Version<Version_alt then Version=Version_alt end end
			--test with: iup.Message("Version",Version) 
		end --for Datei in p:lines() do 
		--test with: iup.Message(Version,Version+1)
		Version=Version+1
		iup.Message("Archivieren der Version:",tree['title']:gsub("(%.+)","_Version" .. Version .. "%1"))
		os.execute('copy "' .. tree['title'] .. '" "' .. tree['title']:gsub("(%.+)","_Version" .. Version .. "%1") .. '"')
	end --if tree['title']:match(".:\\.*%.[^\\]+") then
end --function startversion:action()

--5.1.8 menu for building new page
menu_new_page = iup.item {title = "Text laden"}
function menu_new_page:action()
	--collect search words
	for i=0,tree.count-1 do
		if tree['TITLE' .. i]=="Suche" then
			searchWords=tree['TITLE' .. i+1]:gsub("https://duckduckgo%.com/%?q=",""):gsub("%+"," "):gsub("&t=ffhp&ia=web","") --example: https://duckduckgo.com/?q=Deutsche+Bank+Controlling&t=ffhp&ia=web
		end --if tree['TITLE' .. i]="Suche" then
	end --for i=0,tree.count-1 do
	local wordTable={}
	for word in (searchWords .. " "):gmatch("([^ ]*) ") do
		wordTable[word]=0
	end --for word in (searchWords .. " "):gmatch("([^ ]) ") do
	--test with: for k,v in pairs(wordTable) do print(k,v) end
	--collect all nodes in table
	local inTreeTable={}
	for i=0,tree.count-1 do
		inTreeTable[tree['TITLE' .. i]]=i
	end --for i=0,tree.count-1 do
	--search for main internet pages and subpages
	local textTable={}
	local textforTable=""
	local subtextTable={}
	local subtextforTable=""
	local subtext2Table={}
	local subtext2forTable=""
	lineNumber=0  titleText=""
	for line in (textbox1.value .. "\n"):gmatch("([^\n]*)\n") do
		if lineNumber>0 then lineNumber=lineNumber+1 end
		line=line:gsub(" [^a-zA-Z0-9]+ ","/") .. " "
		--test with: print(lineNumber,line)
		if line:match("http.?://[^/]*/") then
			--textTable[line:match("(http.?://[^/]*)/")]=true
			textforTable=line:match("(http.?://[^/]*)/")
			--subtextTable[line:match("(http.?://[^ ]*) ")]=line:match("(http.?://[^/]*)/")
			subtextforTable=line:match("(http.?://[^ ]*) ")
			lineNumber=1 titleText=line:match("(http.?://[^/]*)/")
		elseif line:match("http[^ ]*") then
			--textTable[line:match("http[^ ]*")]=true
			textforTable=line:match("http[^ ]*")
			lineNumber=1 titleText=line:match("http[^ ]*")
		end --if line:match("http[^ ]*") then
		--test with: print(lineNumber)
		if lineNumber==2 then
			--subtext2Table[titleText]=line titleText=""
			subtext2forTable=line 
			--test with: print(textforTable, subtextforTable, subtext2forTable)
			for k1,v1 in pairs(wordTable) do
				wordTable[k1]=0
			end --for k1,v1 in pairs(wordTable) do
			for k1,v1 in pairs(wordTable) do
				if subtext2forTable:match(k1) then wordTable[k1]=1 end
			end --for k1,v1 in pairs(wordTable) do
			--test with: for k1,v1 in pairs(wordTable) do print(k1,v1) end
			local wordFound=1
			--test with: print(wordFound)
			for k1,v1 in pairs(wordTable) do
			--test with: print(k1,v1)
				wordFound=wordFound*v1
			end --for k1,v1 in pairs(wordTable) do
			--test with: print(wordFound)
			--delete if not with all words
			if wordFound==1 then
				subtext2Table[subtext2forTable]=true
				textTable[textforTable]=true
				if subtextforTable~="" then
					subtextTable[subtextforTable]=textforTable
				end --if subtextforTable~="" then
			end --if field:match("Deutsche") and field:match("Bank") and field:match("Controlling") then
			titleText="" textforTable="" subtextforTable=""
		end --if lineNumber==2 then
	end --for line in (textbox1.value.. "\n"):gmatch("([^\n]*)\n") do
	--insert main internet pages
	for k,v in pairs(textTable) do
		if k:match("(http.?://[^/]+)") and inTreeTable[k]==nil then
			iup.TreeAddNodes(tree, {branchname="unsortierte Internetseiten",{branchname=k}},1)
		end --if inTreeTable[k]==nil then
	end --for k,v in pairs(textTable) do
	--add leafs to main pages found in tree
	for k,v in pairs(subtextTable) do
		for i=0,tree.count-1 do
			if tree['TITLE' .. i]==v and inTreeTable[k]==nil and tree['TITLE' .. tree['PARENT' .. i]]~="uninteressante Seiten" then
				tree['addleaf' .. i] = k
				tree.value=i+1
				iup.TreeSetAncestorsAttributes(tree,i+1,{color="255 0 0",})
				iup.TreeSetNodeAttributes(tree,i+1,{color="0 0 250",})
			end --if tree['TITLE' .. i]==v then
		end --for i=0,tree.count-1 do
	end --for k,v in pairs(subtextTable) do
end --function menu_new_page:action()

--5.1.9 start file of node of tree in IUP Lua scripter or start empty file in notepad or start empty scripter
startnodescripter = iup.item {title = "Skripter starten"}
function startnodescripter:action()
	--read first line of file. If it is empty then scripter cannot open it. So open file with notepad.exe
	if file_exists(tree['title']) then inputfile=io.open(tree['title'],"r") ErsteZeile=inputfile:read() inputfile:close() end
	if file_exists(tree['title']) and ErsteZeile then 
		os.execute('start "d" C:\\Lua\\iupluascripter54.exe "' .. tree['title'] .. '"')
	elseif file_exists(tree['title']) then 
		os.execute('start "d" notepad.exe "' .. tree['title'] .. '"')
	else
		os.execute('start "d" C:\\Lua\\iupluascripter54.exe ')
	end --if file_exists(tree['title']) and ErsteZeile then 
end --function startnodescripter:action()

--5.1.10 start the file or repository of the node of tree
startnode = iup.item {title = "Starten"}
function startnode:action() 
	if tree['title']:match("^.:\\.*%.[^\\ ]+$") or tree['title']:match("^.:\\.*[^\\]+$") or tree['title']:match("^.:\\$") or tree['title']:match("^[^ ]*//[^ ]+$") then os.execute('start "D" "' .. tree['title'] .. '"') end
end --function startnode:action()

--5.1.12 put the menu items together in the menu for tree
menu = iup.menu{
		startcopy,
		renamenode, 
		addbranch, 
		addbranch_fromclipboard, 
		addbranchbottom, 
		addbranch_fromclipboardbottom, 
		addleaf,
		addleaf_fromclipboard,
		addleafbottom,
		addleaf_fromclipboardbottom,
		startversion,
		startnodescripter, 
		menu_new_page, 
		startnode, 
		}
--5.1 menu of tree end
--5. context menus (menus for right mouse click) end


--6 buttons
--6.1 logo image definition and button with logo
img_logo = iup.image{
  { 4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,3,3,1,1,3,3,3,1,1,1,1,1,3,1,1,1,3,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,3,3,1,1,3,1,1,3,1,1,1,1,3,1,1,3,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,3,3,3,3,1,1,1,1,1,3,1,1,3,1,1,1,1,3,1,3,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,3,3,3,4,4,3,1,1,1,1,3,3,3,3,1,1,1,1,3,3,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,3,3,3,3,4,4,3,3,1,1,1,3,1,1,1,3,1,1,1,3,1,3,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,3,3,3,3,3,3,3,3,1,1,1,3,1,1,1,3,1,1,1,3,1,1,3,1,1,1,1,1,4,4,4 },
  { 4,1,1,3,3,3,3,3,3,3,3,1,1,1,3,3,3,3,1,1,3,1,3,1,1,1,3,1,3,1,1,4,4,4 },
  { 4,1,1,1,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,3,1,3,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,3,1,3,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,3,1,3,3,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,1,1,3,3,1,3,1,3,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,1,1,3,3,1,3,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,1,1,1,4,4,4,4,4,3,3,4,4,4,4,1,3,3,1,1,1,1,1,1,1,4,4,4,4 },
  { 4,1,1,1,1,1,1,1,4,4,4,4,3,3,3,3,3,3,4,4,4,3,1,1,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,1,4,4,4,4,4,3,3,3,3,3,3,3,3,3,4,3,4,1,1,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,1,1,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,1,1,1,1,1,1,4,4,4 },
  { 4,1,1,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,1,1,1,1,1,4,4,4 },
  { 4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,1,1,1,4,4,4 },
  { 4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,1,1,4,4,4 },
  { 4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,4,4,4 },
  { 4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4 },
  { 4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4 },
  { 4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4 },
  { 4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3 },
  { 4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4 },
  { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4 },
  { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4 },
  { 3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4 },
  { 4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4 }
  ; colors = { "255 255 255", color_light_color_grey, color_blue, "255 255 255" }
}
button_logo=iup.button{image=img_logo,title="", size="23x20"}
function button_logo:action()
	iup.Message("Dr. Bruno Kaiser","Lizenz Open Source\nb.kaiser@beckmann-partner.de")
end --function button_logo:flat_action()

--6.2 button for saving tree reflexive with the programm
button_save_lua_table=iup.flatbutton{title="Datei speichern", size="75x20", BGCOLOR=color_buttons, FGCOLOR=color_button_text}
function button_save_lua_table:flat_action()
	save_reflexive_tree_to_lua(path .. "\\" .. thisfilename)

end --function button_save_lua_table:flat_action()

--6.3 button for search in tree, tree2 and tree3
button_search=iup.flatbutton{title="Suchen\n(Strg+F)", size="85x20", BGCOLOR=color_buttons, FGCOLOR=color_button_text}
function button_search:flat_action()
	searchtext.value=tree.title
	searchtext.SELECTION="ALL"
	dlg_search:popup(iup.ANYWHERE, iup.ANYWHERE)
end --function button_search:flat_action()

--6.4 button for getting internet sites from text
button_new_page = iup.flatbutton{title = "Text laden",size="70x20", BGCOLOR=color_buttons, FGCOLOR=color_button_text}
function button_new_page:flat_action()
	--collect search words
	for i=0,tree.count-1 do
		if tree['TITLE' .. i]=="Suche" then
			searchWords=tree['TITLE' .. i+1]:gsub("https://duckduckgo%.com/%?q=",""):gsub("%+"," "):gsub("&t=ffhp&ia=web","") --example: https://duckduckgo.com/?q=Deutsche+Bank+Controlling&t=ffhp&ia=web
		end --if tree['TITLE' .. i]="Suche" then
	end --for i=0,tree.count-1 do
	local wordTable={}
	for word in (searchWords .. " "):gmatch("([^ ]*) ") do
		wordTable[word]=0
	end --for word in (searchWords .. " "):gmatch("([^ ]) ") do
	--test with: for k,v in pairs(wordTable) do print(k,v) end
	--collect all nodes in table
	local inTreeTable={}
	for i=0,tree.count-1 do
		inTreeTable[tree['TITLE' .. i]]=i
	end --for i=0,tree.count-1 do
	--search for main internet pages and subpages
	local textTable={}
	local textforTable=""
	local subtextTable={}
	local subtextforTable=""
	local subtext2Table={}
	local subtext2forTable=""
	lineNumber=0  titleText=""
	for line in (textbox1.value .. "\n"):gmatch("([^\n]*)\n") do
		if lineNumber>0 then lineNumber=lineNumber+1 end
		line=line:gsub(" [^a-zA-Z0-9]+ ","/") .. " "
		--test with: print(lineNumber,line)
		if line:match("http.?://[^/]*/") then
			--textTable[line:match("(http.?://[^/]*)/")]=true
			textforTable=line:match("(http.?://[^/]*)/")
			--subtextTable[line:match("(http.?://[^ ]*) ")]=line:match("(http.?://[^/]*)/")
			subtextforTable=line:match("(http.?://[^ ]*) ")
			lineNumber=1 titleText=line:match("(http.?://[^/]*)/")
		elseif line:match("http[^ ]*") then
			--textTable[line:match("http[^ ]*")]=true
			textforTable=line:match("http[^ ]*")
			lineNumber=1 titleText=line:match("http[^ ]*")
		end --if line:match("http[^ ]*") then
		--test with: print(lineNumber)
		if lineNumber==2 then
			--subtext2Table[titleText]=line titleText=""
			subtext2forTable=line 
			--test with: print(textforTable, subtextforTable, subtext2forTable)
			for k1,v1 in pairs(wordTable) do
				wordTable[k1]=0
			end --for k1,v1 in pairs(wordTable) do
			for k1,v1 in pairs(wordTable) do
				if subtext2forTable:match(k1) then wordTable[k1]=1 end
			end --for k1,v1 in pairs(wordTable) do
			--test with: for k1,v1 in pairs(wordTable) do print(k1,v1) end
			local wordFound=1
			--test with: print(wordFound)
			for k1,v1 in pairs(wordTable) do
			--test with: print(k1,v1)
				wordFound=wordFound*v1
			end --for k1,v1 in pairs(wordTable) do
			--test with: print(wordFound)
			--delete if not with all words
			if wordFound==1 then
				subtext2Table[subtext2forTable]=true
				textTable[textforTable]=true
				if subtextforTable~="" then
					subtextTable[subtextforTable]=textforTable
				end --if subtextforTable~="" then
			end --if field:match("Deutsche") and field:match("Bank") and field:match("Controlling") then
			titleText="" textforTable="" subtextforTable=""
		end --if lineNumber==2 then
	end --for line in (textbox1.value.. "\n"):gmatch("([^\n]*)\n") do
	--insert main internet pages
	for k,v in pairs(textTable) do
		if k:match("(http.?://[^/]+)") and inTreeTable[k]==nil then
			iup.TreeAddNodes(tree, {branchname="unsortierte Internetseiten",{branchname=k}},1)
		end --if inTreeTable[k]==nil then
	end --for k,v in pairs(textTable) do
	--add leafs to main pages found in tree
	for k,v in pairs(subtextTable) do
		for i=0,tree.count-1 do
			if tree['TITLE' .. i]==v and inTreeTable[k]==nil and tree['TITLE' .. tree['PARENT' .. i]]~="uninteressante Seiten" then
				tree['addleaf' .. i] = k
				tree.value=i+1
				iup.TreeSetAncestorsAttributes(tree,i+1,{color="255 0 0",})
				iup.TreeSetNodeAttributes(tree,i+1,{color="0 0 250",})
			end --if tree['TITLE' .. i]==v then
		end --for i=0,tree.count-1 do
	end --for k,v in pairs(subtextTable) do
end --function button_new_page:action()

--6.5 button for building new page
button_unmark_tree = iup.flatbutton{title = "Baum entmarkieren",size="90x20", BGCOLOR=color_buttons, FGCOLOR=color_button_text}
function button_unmark_tree:flat_action()
	--unmark all nodes in tree
	for i=0,tree.count-1 do
		tree["color" .. i]="0 0 0"
	end --for i=0,tree.count-1 do
end --function button_unmark_tree:action()

--6.6 button with second logo
button_logo2=iup.button{image=img_logo,title="", size="23x20"}
function button_logo2:action()
	iup.Message("Dr. Bruno Kaiser","Lizenz Open Source\nb.kaiser@beckmann-partner.de")
end --function button_logo:flat_action()

--7 Main Dialog

--7.1 textboxes
textbox1 = iup.multiline{value="",size="360x520",WORDWRAP="YES"}
textbox1.value="Bitte Text eingeben"

--7.3 load tree from self file
actualtree=lua_tree_output
--build tree
tree=iup.tree{
map_cb=function(self)
self:AddNodes(actualtree)
end, --function(self)
SIZE="10x200",
showrename="YES",--F2 key active
markmode="SINGLE",--for Drag & Drop SINGLE not MULTIPLE
showdragdrop="YES",
}


--set colors of tree
tree.BGCOLOR=color_background_tree --set the background color of the tree
-- Callback of the right mouse button click
function tree:rightclick_cb(id)
	tree.value = id
	menu:popup(iup.MOUSEPOS,iup.MOUSEPOS) --popup the defined menue
end --function tree:rightclick_cb(id)
-- Callback called when a node will be doubleclicked
function tree:executeleaf_cb(id)
	if tree['title' .. id]:match("^.:\\.*%.[^\\ ]+$") or tree['title' .. id]:match("^.:\\.*[^\\]+$") or tree['title' .. id]:match("^.:\\$") or tree['title' .. id]:match("^[^ ]*//[^ ]+$") then os.execute('start "d" "' .. tree['title' .. id] .. '"') end
end --function tree:executeleaf_cb(id)
-- Callback for pressed keys
function tree:k_any(c)
	if c == iup.K_DEL then
		-- do a totalchildcount of marked node. Then pop the table entries, which correspond to them.
		for j=0,tree.totalchildcount do
			--table.remove(attributes, tree.value+1)
		end --for j=0,tree.totalchildcount do
		tree.delnode = "MARKED"
	elseif c == iup.K_cF then
		searchtext.value=tree.title
		searchtext.SELECTION="ALL"
		dlg_search:popup(iup.ANYWHERE, iup.ANYWHERE)
	elseif c == iup.K_Menu then
		menu:popup(iup.MOUSEPOS,iup.MOUSEPOS) --popup the defined menue
	end --if c == iup.K_DEL then
end --function tree:k_any(c)


--7.4 building the dialog and put buttons, trees and preview together
maindlg = iup.dialog {

	iup.vbox{

		iup.hbox{
			button_logo,
			button_save_lua_table,
			button_search,
			iup.fill{},
			button_new_page,
			button_unmark_tree,
			button_logo2,
		}, --iup.hbox{
		iup.hbox{textbox1,iup.frame{title="Manuelle Zuordnung als Baum",tree,},},
	}, --iup.vbox{
	icon = img_logo,
	title = path .. " Documentation Tree",
	size="FULLxFULL" ;
	gap="3",
	alignment="ARIGHT",
	margin="5x5" 
}--maindlg = iup.dialog {

--7.5 show the dialog
maindlg:showxy(iup.CENTER,iup.CENTER) 

--7.6 Main Loop
if (iup.MainLoopLevel()==0) then iup.MainLoop() end



--]====]
